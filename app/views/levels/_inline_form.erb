<%= form_for @level, :method => :put, :remote => true do |f| %>
    <%= f.hidden_field :tiles %>
    <%= f.hidden_field :world_width %>
    <%= f.hidden_field :world_height %>
    <%= f.hidden_field :initial_agent_x %>
    <%= f.hidden_field :initial_agent_y %>
    <%= f.hidden_field :goal_x %>
    <%= f.hidden_field :goal_y %>
    <%= f.hidden_field :image_src %>
    <%= f.submit 'Save' %>
<% end %>
<script>
    // attach a submit handler to the form
    $('.edit_level')[0].addEventListener('submit', function(event) {
        $('#level_tiles')[0].value = $.toJSON(currentLevel.getTiles());
        $('#level_world_width')[0].value = currentLevel.getWorldWidth();
        $('#level_world_height')[0].value = currentLevel.getWorldHeight();
        $('#level_initial_agent_x')[0].value = currentLevel.getInitialAgentX();
        $('#level_initial_agent_y')[0].value = currentLevel.getInitialAgentY();
        $('#level_goal_x')[0].value = currentLevel.getGoalX();
        $('#level_goal_y')[0].value = currentLevel.getGoalY();
        $('#level_image_src')[0].value = currentLevel.getMapURL();

    });
</script>

