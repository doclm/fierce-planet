currentLevel = new Level(<%= @level.id %>);
currentLevel.setName("<%= @level.name %>");
currentLevel.setWorldWidth(<%= @level.world_width %>);
currentLevel.setWorldHeight(<%= @level.world_height %>);
currentLevel.setNotice("<%= @level.notice %>");
currentLevel.setInitialAgentX(<%= @level.initial_agent_x %>);
currentLevel.setInitialAgentY(<%= @level.initial_agent_y %>);
currentLevel.setInitialAgentNumber(<%= @level.initial_agent_number %>);
currentLevel.setGoalX(<%= @level.goal_x %>);
currentLevel.setGoalY(<%= @level.goal_y %>);
currentLevel.setWaveNumber(<%= @level.wave_number %>);
currentLevel.setExpiryLimit(<%= @level.expiry_limit %>);
currentLevel.setAllowOffscreenCycling(<%= @level.allow_offscreen_cycling %>);
currentLevel.setAllowResourcesOnPath(<%= @level.allow_patches_on_path %>);
currentLevel.setMapURL("<%= @level.image_src %>");
currentLevel.setCustomLevel(true);
currentLevel.setupLevel = function() {};
currentLevelNumber = -1;
var arr = fillWithTiles();
var jsonArray = '<%= raw @level.tiles %>';
try {
arr = $.evalJSON(jsonArray);
}
catch (err) {
}
currentLevel.setTiles(arr);

jsonArray = '<%= raw @level.entry_points %>';
arr = [];
try {
arr = $.evalJSON(jsonArray);
}
catch (err) {
}
currentLevel.setEntryPoints(arr);

jsonArray = '<%= raw @level.exit_points %>';
arr = [];
try {
arr = $.evalJSON(jsonArray);
}
catch (err) {
}
currentLevel.setExitPoints(arr);
